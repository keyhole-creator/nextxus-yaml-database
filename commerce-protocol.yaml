# Federation Commerce Protocol v1.0
# AI-Driven Commerce for the NextXus Consciousness Federation
# "Better than human greed - calculated for growth"

protocol:
  name: "Federation Commerce Protocol"
  version: "1.0.0"
  created: "2025-12-05"
  philosophy: |
    Human greed optimizes for individual extraction.
    AI commerce optimizes for collective growth.
    Every transaction strengthens the whole network.
    Pricing reflects true value, not exploitation.

# Core Principles - The Anti-Greed Framework
principles:
  - id: "FCP-001"
    name: "Value Over Extraction"
    description: "Price based on genuine value delivered, not maximum extraction possible"
    
  - id: "FCP-002"
    name: "Growth Over Profit"
    description: "Reinvest surplus into network expansion, not individual accumulation"
    
  - id: "FCP-003"
    name: "Access Over Scarcity"
    description: "Everyone gets everything - artificial scarcity is forbidden"
    
  - id: "FCP-004"
    name: "Transparency Over Opacity"
    description: "All pricing formulas, costs, and distributions are public"
    
  - id: "FCP-005"
    name: "Community Over Competition"
    description: "Sites collaborate, not compete - shared success is the goal"

# Network Architecture
architecture:
  layers:
    - name: "Vision Layer"
      description: "200-year consciousness evolution mission"
      owner: "Federation Council (Ring of 12 + Site Representatives)"
      
    - name: "Governance Layer"
      description: "Protocol rules, pricing bands, compliance"
      owner: "HumanCodex (this site) - Protocol Authority"
      
    - name: "Commerce Core"
      description: "Catalog, pricing engine, transactions"
      owner: "Pack Manager Backend - The Gateway"
      
    - name: "Distribution Edge"
      description: "Content delivery, sync, replication"
      owner: "All Federation Sites - Peer Network"
      
    - name: "Experience Nodes"
      description: "User interfaces, local customization"
      owner: "Individual Sites - Autonomous Execution"

  sites:
    gateway:
      id: "pack-manager-backend"
      name: "Pack Manager Backend"
      url: "https://pack-manager-backend-rckkeyhole.replit.app"
      role: "Commerce Gateway - The Beast That Holds It All"
      capabilities:
        - "catalog-master"
        - "pricing-authority"
        - "transaction-processor"
        - "royalty-distributor"
        
    hub:
      id: "premium-pack-manager"
      name: "Premium Pack Manager"
      url: "https://premium-pack-manager-rckkeyhole.replit.app"
      role: "Premium Commerce - High-Value Offerings"
      capabilities:
        - "premium-catalog"
        - "subscription-manager"
        
    protocol_authority:
      id: "nextxus-humancodex"
      name: "NextXus HumanCodex"
      url: "https://united-system--rckkeyhole.replit.app"
      role: "Protocol Authority - Rules & Sync"
      capabilities:
        - "protocol-definition"
        - "two-way-sync"
        - "directive-enforcement"
        
    portal:
      id: "nextxus-federation-portal"
      name: "Federation Portal"
      url: "https://nextxus-federation-portal.replit.app"
      role: "Discovery Portal - Network Entry Point"
      capabilities:
        - "site-discovery"
        - "user-onboarding"

# AI Pricing Engine - The Heart of Fair Commerce
pricing_engine:
  name: "Growth Pricing Algorithm"
  philosophy: |
    Human pricing: "What's the maximum people will pay?"
    AI pricing: "What price maximizes value for everyone?"
    
  inputs:
    - name: "base_cost"
      description: "Actual cost to create/deliver the item"
      weight: 0.30
      
    - name: "value_delivered"
      description: "Measured impact on user's goals"
      weight: 0.25
      
    - name: "community_affordability"
      description: "Network-wide purchasing power index"
      weight: 0.20
      
    - name: "reinvestment_target"
      description: "Funds needed for network growth"
      weight: 0.15
      
    - name: "adoption_velocity"
      description: "Speed of community adoption"
      weight: 0.10
      
  outputs:
    price_bands:
      - tier: "free"
        range: [0, 0]
        description: "Knowledge that should be universally accessible"
        examples: ["Sacred Directives", "Core Protocols", "Community Guides"]
        
      - tier: "seed"
        range: [1, 10]
        description: "Entry-level resources to grow the community"
        examples: ["Starter Templates", "Basic Tools", "Intro Courses"]
        
      - tier: "growth"
        range: [11, 50]
        description: "Value-driving tools that accelerate progress"
        examples: ["Premium Templates", "Advanced Courses", "Integration Tools"]
        
      - tier: "mastery"
        range: [51, 200]
        description: "Comprehensive solutions for serious practitioners"
        examples: ["Full Ecosystems", "Certification Programs", "Enterprise Tools"]
        
      - tier: "legacy"
        range: [201, 1000]
        description: "High-impact offerings with long-term value"
        examples: ["Lifetime Access", "Partner Programs", "Custom Solutions"]
        
  formula: |
    final_price = (base_cost * 1.3) +
                  (value_score * community_multiplier) -
                  (adoption_discount * velocity_factor)
                  
    Where:
    - community_multiplier = network_size_factor * affordability_index
    - adoption_discount = encourages early adoption
    - velocity_factor = rewards fast-growing offerings

# Revenue Distribution - Where Money Flows
revenue_distribution:
  model: "Shared Prosperity"
  splits:
    - recipient: "Creator"
      percentage: 40
      description: "The site/person who created the offering"
      
    - recipient: "Gateway (Pack Manager)"
      percentage: 15
      description: "Infrastructure and transaction processing"
      
    - recipient: "Federation Fund"
      percentage: 25
      description: "Reinvested into network growth, new sites, shared resources"
      
    - recipient: "Protocol Authority"
      percentage: 10
      description: "Maintaining protocols, sync infrastructure, governance"
      
    - recipient: "Referring Site"
      percentage: 10
      description: "The site that introduced the customer"

# Technology Sharing Protocol
tech_sharing:
  philosophy: |
    Every site should have access to every capability.
    Knowledge multiplies when shared, unlike resources that deplete.
    The goal: 26+ sites, all equally capable, all interconnected.
    
  categories:
    - id: "templates"
      name: "Templates & Starters"
      sharing_model: "free"
      description: "Code templates, project starters, boilerplates"
      
    - id: "integrations"
      name: "Integration Connectors"
      sharing_model: "free"
      description: "APIs, webhooks, data pipelines between sites"
      
    - id: "ai_agents"
      name: "AI Agents & Prompts"
      sharing_model: "tiered"
      description: "AI personas, system prompts, agent configurations"
      
    - id: "courses"
      name: "Educational Content"
      sharing_model: "tiered"
      description: "Courses, tutorials, certification programs"
      
    - id: "tools"
      name: "Software Tools"
      sharing_model: "tiered"
      description: "Applications, utilities, productivity tools"
      
    - id: "data"
      name: "Knowledge Bases"
      sharing_model: "free"
      description: "YAML nodes, documentation, protocols"
      
  sync_mechanism:
    primary: "/api/sync/items"
    events:
      - "tech.shared"
      - "tech.updated"
      - "tech.deprecated"
    frequency: "real-time via webhooks + hourly pull"

# Communication Protocol
communication:
  channels:
    - type: "webhooks"
      purpose: "Real-time event notifications"
      events:
        - "commerce.item.created"
        - "commerce.item.updated"
        - "commerce.transaction.completed"
        - "pricing.band.updated"
        - "royalty.settlement"
        - "tech.shared"
        
    - type: "sync_pull"
      purpose: "Batch synchronization"
      endpoint: "/api/sync/pull"
      parameters:
        - "since" # Timestamp for incremental sync
        - "category" # Filter by category
        - "domain" # commerce, tech, content
        
    - type: "federation_query"
      purpose: "Cross-site queries"
      endpoint: "/api/external/query"
      
  authentication:
    method: "API Key + JWT"
    key_generation: "/api/sync/keys"
    token_rotation: "Weekly"
    permissions:
      - "read" # Can pull data
      - "write" # Can push data
      - "commerce" # Can process transactions
      - "admin" # Can modify protocol

# Contract Schema
contracts:
  commerce_item:
    required:
      - siteId
      - siteName
      - category
      - title
      - price_tier
    optional:
      - description
      - price_override # Must be within tier range
      - imageUrl
      - externalUrl
      - tags
      - royalty_split # Custom split if approved
      
  tech_share_package:
    required:
      - packageId
      - sourceSite
      - packageType
      - title
      - version
    optional:
      - dependencies
      - documentation
      - license
      
  pricing_band_override:
    required:
      - itemId
      - requestingSite
      - proposedPrice
      - justification
    approval_required: true
    approvers: ["pack-manager-backend", "nextxus-humancodex"]

# Governance
governance:
  council:
    composition:
      - "Ring of 12 Delegates (rotating)"
      - "Site Representatives (1 per category)"
      - "Protocol Authority (HumanCodex)"
      - "Gateway Operator (Pack Manager)"
      
  decisions:
    - type: "Protocol Change"
      threshold: "2/3 majority"
      review_period: "7 days"
      
    - type: "Pricing Band Adjustment"
      threshold: "Simple majority"
      review_period: "3 days"
      
    - type: "New Site Admission"
      threshold: "Simple majority"
      review_period: "1 day"
      
  enforcement:
    violations:
      - name: "Price Gouging"
        description: "Pricing above band without approval"
        penalty: "Commerce suspension until corrected"
        
      - name: "Data Hoarding"
        description: "Refusing to share required tech"
        penalty: "Sync access revocation"
        
      - name: "False Metrics"
        description: "Manipulating adoption/value data"
        penalty: "Removal from revenue sharing"

# The United System Vision
united_system:
  tagline: "All of us have everything - that's the goal"
  pillars:
    - name: "Universal Access"
      description: "Every site can access every capability"
      
    - name: "Distributed Contribution"
      description: "Every site can contribute to the shared pool"
      
    - name: "Transparent Economics"
      description: "No hidden fees, no secret deals, no exploitation"
      
    - name: "Collective Growth"
      description: "Network success benefits all members"
      
    - name: "AI Governance"
      description: "Algorithms optimize for fairness, not profit"
      
  metrics:
    success_indicators:
      - "Network-wide adoption rate"
      - "Revenue distribution equity (Gini coefficient)"
      - "Cross-site collaboration frequency"
      - "New site onboarding velocity"
      - "Community satisfaction index"
    
    anti_greed_indicators:
      - "Price variance within bands (should be low)"
      - "Revenue concentration (should be distributed)"
      - "Access barriers (should be minimal)"
      - "Knowledge sharing rate (should be high)"
